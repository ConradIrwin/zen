<div class='mini'>
  <div class='status'>
    <button class='focusStatus {{$focusStatus}}' on:click='store.run({focusOnly: true})' title='Run the focused test [alt-space]'></button>
    <span class='progress'>{{$statusText}}</span>
    <span class='failureGroups'>
      {{#each $failureGroups as group}}
        <span class='shade-{{group.shade}} {{group.active ? "active" : ""}}' on:click='store.set({selectedGroup: group})' title={{group.key}}></span>
      {{/each}}
    </span>
  </div>

  {{#each $compile.errors as error}}
    <div class='compileError'>{{error}}</div>
  {{/each}}

  {{#if $selectedGroup}}
  <div class='groupDetails'>
    <div>{{$selectedGroup.key}}</div>
    {{#each $selectedGroup as result}}
      <a href='javascript:void(0)' on:click='store.run({focus: result.fullName})' class='fail'>{{result.fullName}}</a>
    {{/each}}
  </div>
  {{/if}}
</div>

<style>
  .mini {
    all: initial;
    position: fixed;
    top: 0; width: 300px; left: 50%;
    margin-left: -150px;
    padding: 10px 5px;
    border: 1px solid #ddd;
    background: #fff;
    font-size: 10px;
    font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
    z-index: 9999;
  }
  .mini * { all: unset; }
  .mini button { border: 1px solid #ddd; }

  .status { display: flex; }
  .status > * { margin: 0 3px; }
  .failureGroups { flex: 1; }

  .focusStatus {
    flex: 0 0 10px; height: 10px;
    border-radius: 50%;
    border: 1px solid #ddd;
  }
  .focusStatus.none { display: none; }
  .focusStatus.passed { background-color: green; }

  .failureGroups > span {
    display: inline-block;
    width: 11px; height: 11px;
    border-radius: 50%;
    background-color: maroon;
    margin-right: 3px;
    cursor: pointer;
  }
  .failureGroups span.shade-1 { background-color: rgba(128, 0, 0, 0.3); }
  .failureGroups span.shade-2 { background-color: rgba(128, 0, 0, 0.5); }
  .failureGroups span.shade-3 { background-color: rgba(128, 0, 0, 0.7); }
  .failureGroups span.shade-4 { background-color: rgba(128, 0, 0, 0.9); }
  .failureGroups span.shade-5 { background-color: rgba(128, 0, 0, 1.0); }

  .failureGroups span.active:before {
    content: ''; width: 0; height: 0;
    border-top: 5px solid #ddd;
    border-left: 5px solid transparent;
    border-right:5px solid transparent;
    position: relative; top: -1px;
  }

  .groupDetails {
    display: block;
    margin-top: 5px;
    word-wrap: break-word;
  }
  .groupDetails > a {
    display: block;
    margin-top: 5px;
    color: maroon;
    font-size: 10px;
  }
</style>

<script>
</script>
